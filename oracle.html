<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Oracle Module &#8212; Database Release Manager</title>
    <link rel="stylesheet" href="static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="static/dbrm.css" type="text/css" />
    <link rel="stylesheet" href="static/bootswatch-3.3.6/superhero/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="static/bootstrap-sphinx.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <script type="text/javascript" src="static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="static/bootstrap-sphinx.js"></script>
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Mongo Module" href="mongo.html" />
    <link rel="prev" title="MariadDB Module" href="mariadb.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          Database Release Manager</a>
        <span class="navbar-text navbar-version pull-left"><b>0.1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="dbm.html">Dbm Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="logfile.html">Logfile Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Install Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="mariadb.html">MariaDB Module</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Oracle Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="mongo.html">Mongo Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="common.html">Commons API</a></li>
<li class="toctree-l1"><a class="reference internal" href="mysql.html">Mysql API</a></li>
<li class="toctree-l1"><a class="reference internal" href="sqlplus.html">Sqlplus API</a></li>
<li class="toctree-l1"><a class="reference internal" href="psql.html">Psql API</a></li>
<li class="toctree-l1"><a class="reference internal" href="commons_mariadb.html">Commons Mariadb API</a></li>
<li class="toctree-l1"><a class="reference internal" href="commons_oracle.html">Commons Oracle API</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Oracle Module</a><ul>
<li><a class="reference internal" href="#project-folder-structure">Project Folder Structure</a></li>
<li><a class="reference internal" href="#variables">Variables</a></li>
<li><a class="reference internal" href="#commands">Commands</a><ul>
<li><a class="reference internal" href="#oracle-version">oracle version</a></li>
<li><a class="reference internal" href="#oracle-test-connection">oracle test_connection</a><ul>
<li><a class="reference internal" href="#test-connection-options">test_connection options:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#oracle-shell">oracle shell</a><ul>
<li><a class="reference internal" href="#shell-options">shell options:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#oracle-download">oracle download</a><ul>
<li><a class="reference internal" href="#oracle-options">oracle options:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#oracle-compile">oracle compile</a><ul>
<li><a class="reference internal" href="#compile-options">compile options:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#oracle-query">oracle query</a><ul>
<li><a class="reference internal" href="#query-options">query options;</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="mariadb.html" title="Previous Chapter: MariadDB Module"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; MariadDB Module</span>
    </a>
  </li>
  <li>
    <a href="mongo.html" title="Next Chapter: Mongo Module"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Mongo Module &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row" >
    <div class="col-md-12 content">
      
  <div class="section" id="oracle-module">
<span id="oracle-module"></span><h1>Oracle Module<a class="headerlink" href="#oracle-module" title="Permalink to this headline">¶</a></h1>
<p>Target of this module is supply a tool for simplify development process and source organization.</p>
<p>Main features are:</p>
<ul class="simple">
<li>compilation of scripts, packages, views, triggers, functions, jobs, schedulers and
synonims</li>
<li>download from an existing database all functions, packages, triggers</li>
<li>simplify access to database between developers and packaging of released versions.</li>
</ul>
<p>Mission of <code class="docutils literal"><span class="pre">dbrm</span></code> is NOT create a new IDE for SQL, every users can use any IDE for create tables, functions, etc. but with <code class="docutils literal"><span class="pre">dbrm</span></code> is it possible unify process for trace database informations and store to a repository in an ordered mode.</p>
<div class="section" id="project-folder-structure">
<span id="project-folder-structure"></span><h2>Project Folder Structure<a class="headerlink" href="#project-folder-structure" title="Permalink to this headline">¶</a></h2>
<p>An initialized project folder is composed by these directories:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">creation_scripts</span></code>: this directory contains initial DDL script for create all
tables of the project from zero. This directory could be used
at begin of the project for the first release, in the next release
is then used <em>update_scripts</em> directory that contains script for
upgrade project and trace changes between releasees.</li>
<li><code class="docutils literal"><span class="pre">dbrm-profiles</span></code>: if profiles are enable contains all configuration files for
different environment (dev, test, prod, etc.). This directory could be with
a different name and depend of value present of DRM_PROFILES_PATH variable.</li>
<li><code class="docutils literal"><span class="pre">functions</span></code>: this directory contains files with database functions code</li>
<li><code class="docutils literal"><span class="pre">packages</span></code>: this directory contains files of all PL/SQL packages present on schema</li>
<li><code class="docutils literal"><span class="pre">procedures</span></code>: this directory contains files with database procedure code</li>
<li><code class="docutils literal"><span class="pre">schemas</span></code>: this directory is created automatically when dbrm initialize a directory
and could be used from users for store database schemas (in my case I use Dia).</li>
<li><code class="docutils literal"><span class="pre">triggers</span></code>: this directory contains all files for compile all triggers of the
project database.</li>
<li><code class="docutils literal"><span class="pre">update_scripts</span></code>: this directory is used for store script with changes on database between
first release and next releases.</li>
<li><code class="docutils literal"><span class="pre">views</span></code>: this directory contains files for compiles project database views</li>
<li><code class="docutils literal"><span class="pre">synonims</span></code>: this directory contains files for compile synonims</li>
<li><code class="docutils literal"><span class="pre">jobs</span></code>: this directory contains files for compile jobs</li>
<li><code class="docutils literal"><span class="pre">schedulers</span></code>: this directory contains files for compile schedulers</li>
</ul>
<p>Under project directory normally is also available <code class="docutils literal"><span class="pre">dbrm.conf</span></code> file with main configuration
options of the project and <code class="docutils literal"><span class="pre">dbrm.db</span></code> sqlite database used by <code class="docutils literal"><span class="pre">dbrm</span></code> for the project.</p>
</div>
<div class="section" id="variables">
<span id="variables"></span><h2>Variables<a class="headerlink" href="#variables" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><table border="1" class="colwidths-given docutils">
<colgroup>
<col width="33%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variable</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">ORACLE_USER</span></code></td>
<td>Contains username to use for connection to schema</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">ORACLE_PWD</span></code></td>
<td>Contains password to use for connection to schema</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">ORACLE_DB</span></code></td>
<td>Contains name of the schema to use</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">ORACLE_SID</span></code></td>
<td>Contains name of the SID or Service Name to use on connection.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">ORACLE_DIR</span></code></td>
<td>Contains path of the directory used for store all database scripts.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">ORACLE_COMPILE_FILES_EXCLUDED</span></code></td>
<td>Permit to define a list of script that are present on project directory
to ignore on compilation process.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">TNS_ADMIN</span></code></td>
<td>Override default TNS_ADMIN Oracle variable where retrieve tnsnames.ora
file used on connection</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="commands">
<span id="commands"></span><h2>Commands<a class="headerlink" href="#commands" title="Permalink to this headline">¶</a></h2>
<div class="section" id="oracle-version">
<span id="oracle-version"></span><h3>oracle version<a class="headerlink" href="#oracle-version" title="Permalink to this headline">¶</a></h3>
<p>Show version of oracle module.</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>  <span class="nv">$#</span> dbrm oracle version
  Version: 0.1.0
</pre></div>
</div>
</div>
<div class="section" id="oracle-test-connection">
<span id="oracle-test-connection"></span><h3>oracle test_connection<a class="headerlink" href="#oracle-test-connection" title="Permalink to this headline">¶</a></h3>
<p>Test connection to schema of the active profile or active configuration.</p>
<div class="section" id="test-connection-options">
<span id="test-connection-options"></span><h4>test_connection options:<a class="headerlink" href="#test-connection-options" title="Permalink to this headline">¶</a></h4>
<p>This options are generic option for handle connection and are avilable on different
commands.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">-S</span> <span class="pre">oracle_sid</span></code>: Override Oracle SID (or set ORACLE_SID on configuration file).</li>
<li><code class="docutils literal"><span class="pre">-P</span> <span class="pre">oracle_pwd</span></code>: Override Oracle Password (or set ORACLE_PWD on configuration file).</li>
<li><code class="docutils literal"><span class="pre">-U</span> <span class="pre">oracle_user</span></code>: Override Oracle schema/user (or set ORACLE_USER on configuration file).</li>
<li><code class="docutils literal"><span class="pre">-t</span> <span class="pre">tnsadmin_path</span></code>: Override TNS_ADMIN variable with path of the file tnsnames.ora.</li>
<li><code class="docutils literal"><span class="pre">-D</span> <span class="pre">oracle_dir</span></code>: Directory where save/retrieve packages/views/functions, etc..
(or set ORACLE_DIR on configuration file).</li>
</ul>
<div class="highlight-shell"><div class="highlight"><pre><span></span>  <span class="nv">$#</span> dbrm oracle test_connection
  Connected to openstack_neutron with user neutron correctly.
</pre></div>
</div>
</div>
</div>
<div class="section" id="oracle-shell">
<span id="oracle-shell"></span><h3>oracle shell<a class="headerlink" href="#oracle-shell" title="Permalink to this headline">¶</a></h3>
<p>Enter on schema shell of the active profile or active configuration.</p>
<div class="section" id="shell-options">
<span id="shell-options"></span><h4>shell options:<a class="headerlink" href="#shell-options" title="Permalink to this headline">¶</a></h4>
<p>This options are generic option for handle connection and are avilable on different
commands.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">-S</span> <span class="pre">oracle_sid</span></code>: Override Oracle SID (or set ORACLE_SID on configuration file).</li>
<li><code class="docutils literal"><span class="pre">-P</span> <span class="pre">oracle_pwd</span></code>: Override Oracle Password (or set ORACLE_PWD on configuration file).</li>
<li><code class="docutils literal"><span class="pre">-U</span> <span class="pre">oracle_user</span></code>: Override Oracle schema/user (or set ORACLE_USER on configuration file).</li>
<li><code class="docutils literal"><span class="pre">-t</span> <span class="pre">tnsadmin_path</span></code>: Override TNS_ADMIN variable with path of the file tnsnames.ora.</li>
<li><code class="docutils literal"><span class="pre">-D</span> <span class="pre">oracle_dir</span></code>: Directory where save/retrieve packages/views/functions, etc..
(or set ORACLE_DIR on configuration file).</li>
</ul>
<div class="highlight-shell"><div class="highlight"><pre><span></span>  <span class="nv">$#</span> dbrm oracle shell
</pre></div>
</div>
</div>
</div>
<div class="section" id="oracle-download">
<span id="oracle-download"></span><h3>oracle download<a class="headerlink" href="#oracle-download" title="Permalink to this headline">¶</a></h3>
<p>Download packages, triggers, functions, views, jobs and schedulers from database schema of the active profile or configuration.</p>
<div class="section" id="oracle-options">
<span id="oracle-options"></span><h4>oracle options:<a class="headerlink" href="#oracle-options" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">-S</span> <span class="pre">oracle_sid</span></code>: Override Oracle SID (or set ORACLE_SID on configuration file).</li>
<li><code class="docutils literal"><span class="pre">-P</span> <span class="pre">oracle_pwd</span></code>: Override Oracle Password (or set ORACLE_PWD on configuration file).</li>
<li><code class="docutils literal"><span class="pre">-U</span> <span class="pre">oracle_user</span></code>: Override Oracle schema/user (or set ORACLE_USER on configuration file).</li>
<li><code class="docutils literal"><span class="pre">-t</span> <span class="pre">tnsadmin_path</span></code>: Override TNS_ADMIN variable with path of the file tnsnames.ora.</li>
<li><code class="docutils literal"><span class="pre">-D</span> <span class="pre">oracle_dir</span></code>: Directory where save/retrieve packages/views/functions, etc..
(or set ORACLE_DIR on configuration file).</li>
<li><code class="docutils literal"><span class="pre">--all-packages</span></code>: Download all packages.</li>
<li><code class="docutils literal"><span class="pre">--all-triggers</span></code>: Download all triggers.</li>
<li><code class="docutils literal"><span class="pre">--all-functions</span></code>: Download all functions.</li>
<li><code class="docutils literal"><span class="pre">--all-views</span></code>: Download all views.</li>
<li><code class="docutils literal"><span class="pre">--all-jobs</span></code>: Download all jobs.</li>
<li><code class="docutils literal"><span class="pre">--all-schedules</span></code>: Download all schedules.</li>
<li><code class="docutils literal"><span class="pre">--all</span></code>: Download all.</li>
<li><code class="docutils literal"><span class="pre">--package</span> <span class="pre">name</span></code>: Download a particular package.</li>
<li><code class="docutils literal"><span class="pre">--trigger</span> <span class="pre">name</span></code>: Download a particular trigger.</li>
<li><code class="docutils literal"><span class="pre">--function</span> <span class="pre">name</span></code>: Download a particular function.</li>
<li><code class="docutils literal"><span class="pre">--view</span> <span class="pre">name</span></code>: Download a particular view.</li>
<li><code class="docutils literal"><span class="pre">--job</span> <span class="pre">name</span></code>: Download a particular job.</li>
<li><code class="docutils literal"><span class="pre">--schedule</span> <span class="pre">name</span></code>: Download a particular schedule.</li>
</ul>
<p>There are many options with <code class="docutils literal"><span class="pre">download</span></code> command so I propose hereinafter only some
examples.</p>
<ul class="simple">
<li>Download all packages</li>
</ul>
<div class="highlight-shell"><div class="highlight"><pre><span></span>  <span class="nv">$#</span> dbrm oracle download --all-packages
</pre></div>
</div>
</div>
</div>
<div class="section" id="oracle-compile">
<span id="oracle-compile"></span><h3>oracle compile<a class="headerlink" href="#oracle-compile" title="Permalink to this headline">¶</a></h3>
<p>Compile procedures, triggers, views, packages, jobs and schedulers to an active database.</p>
<p>From command line is visible result of compilation but a more detailed trace is save on logfile defined on <code class="docutils literal"><span class="pre">LOGFILE</span></code> variable
(default <code class="docutils literal"><span class="pre">dbrm.log</span></code>).</p>
<div class="section" id="compile-options">
<span id="compile-options"></span><h4>compile options:<a class="headerlink" href="#compile-options" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">--all-packages</span></code>: Compile all packages present under ORACLE_DIR subdirectories.</li>
<li><code class="docutils literal"><span class="pre">--all-triggers</span></code>: Compile all triggers present under ORACLE_DIR subdirectories.</li>
<li><code class="docutils literal"><span class="pre">--all-functions</span></code>: Compile all functions present under ORACLE_DIR subdirectories.</li>
<li><code class="docutils literal"><span class="pre">--all-views</span></code>: Compile all views present on ORACLE_DIR subdirectories.</li>
<li><code class="docutils literal"><span class="pre">--all-jobs</span></code>: Compile all jobs present on ORACLE_DIR subdirectories.</li>
<li><code class="docutils literal"><span class="pre">--all-schedules</span></code>: Compile all schedules present on ORACLE_DIR subdirectories.</li>
<li><code class="docutils literal"><span class="pre">--all</span></code>: Compile all packages, triggers, functions, views, jobs
and schedules present under ORACLE_DIR subdirectories.</li>
<li><code class="docutils literal"><span class="pre">--package</span> <span class="pre">name</span></code>: Compile a particular package under ORACLE_DIR/packages directory.</li>
<li><code class="docutils literal"><span class="pre">--trigger</span> <span class="pre">name</span></code>: Compile a particular trigger under ORACLE_DIR/triggers directory.</li>
<li><code class="docutils literal"><span class="pre">--function</span> <span class="pre">name</span></code>: Compile a particular function under ORACLE_DIR/functions directory.</li>
<li><code class="docutils literal"><span class="pre">--view</span> <span class="pre">name</span></code>: Compile a particular view under ORACLE_DIR/views directory.</li>
<li><code class="docutils literal"><span class="pre">--job</span> <span class="pre">name</span></code>: Compile a particular job under ORACLE_DIR/views directory.</li>
<li><code class="docutils literal"><span class="pre">--schedule</span> <span class="pre">name</span></code>: Compile a particular schedule under ORACLE_DIR/views directory.</li>
<li><code class="docutils literal"><span class="pre">--exclude</span> <span class="pre">filename</span></code>: Exclude a particular file from compilation.
(This option can be repeat and override
ORACLE_COMPILE_FILES_EXCLUDED configuration variable).</li>
<li><code class="docutils literal"><span class="pre">--id-script</span> <span class="pre">id</span></code>: Compile a particular script registered under
ORACLE_DIR/<directory>/. This option use dbm database
to retrieve script, feature under development.</li>
<li><code class="docutils literal"><span class="pre">--file</span> <span class="pre">file</span></code>: Compile a particular file.
(Use ABS Path or relative path from current dir.)</li>
</ul>
<p>For argument with value if it isn't passed value argument is ignored.</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>  <span class="nv">$#</span> dbrm oracle compile --all-triggers
</pre></div>
</div>
</div>
</div>
<div class="section" id="oracle-query">
<span id="oracle-query"></span><h3>oracle query<a class="headerlink" href="#oracle-query" title="Permalink to this headline">¶</a></h3>
<p>This command permit to execute directly a query through shell on active schema.</p>
<div class="section" id="query-options">
<span id="query-options"></span><h4>query options;<a class="headerlink" href="#query-options" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">-S</span> <span class="pre">oracle_sid</span></code>: Override Oracle SID (or set ORACLE_SID on configuration file).</li>
<li><code class="docutils literal"><span class="pre">-P</span> <span class="pre">oracle_pwd</span></code>: Override Oracle Password (or set ORACLE_PWD on configuration file).</li>
<li><code class="docutils literal"><span class="pre">-U</span> <span class="pre">oracle_user</span></code>: Override Oracle schema/user (or set ORACLE_USER on configuration file).</li>
<li><code class="docutils literal"><span class="pre">-t</span> <span class="pre">tnsadmin_path</span></code>: Override TNS_ADMIN variable with path of the file tnsnames.ora.</li>
<li><code class="docutils literal"><span class="pre">-D</span> <span class="pre">oracle_dir</span></code>: Directory where save/retrieve packages/views/functions, etc..
(or set ORACLE_DIR on configuration file).</li>
<li><code class="docutils literal"><span class="pre">--stdin-query</span></code>: Set this option for query send from standard input.</li>
<li><code class="docutils literal"><span class="pre">--logging</span></code>: Enable logging of the query to log file</li>
<li><code class="docutils literal"><span class="pre">--query</span> <span class="pre">QUERY</span></code>: Query to execute.</li>
<li><code class="docutils literal"><span class="pre">--output-opts</span> <span class="pre">OPTS</span></code>: Customize sqlplus output options.
Default are: set echo off heading off feedback off wrap off.</li>
</ul>
</div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2017, Geaaru.<br/>
      Last updated on Jan 06, 2018.<br/>
    </p>
  </div>
</footer>
  </body>
</html>